<!DOCTYPE html><html><head><meta charset="utf-8"><title>Pro Git 简体中文版 Git 内部原理 - 底层命令 (Plumbing) 和高层命令 (Porcelain)</title><link rel="stylesheet" type="text/css" href="../../assets/vendor/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" type="text/css" href="../../assets/css/main.css"><link rel="shortcut icon" type="images/x-icon" href="../../assets/img/favicon.ico"></head><body><div class="navbar navbar-fixed-top navbar-inverse"><div class="navbar-inner"><div class="container"><ul class="nav"><li class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">英文版<b class="caret"></b></a><ul role="menu" class="dropdown-menu"><li><a href="../../index.en.html">Table Of Contents</a></li><div class="divider"></div><li><a href="../en/ch1_0.html">1 Getting Started </a></li><li><a href="../en/ch2_0.html">2 Git Basics </a></li><li><a href="../en/ch3_0.html">3 Git Branching </a></li><li><a href="../en/ch4_0.html">4 Git on the Server </a></li><li><a href="../en/ch5_0.html">5 Distributed Git </a></li><li><a href="../en/ch6_0.html">6 Git Tools </a></li><li><a href="../en/ch7_0.html">7 Customizing Git </a></li><li><a href="../en/ch8_0.html">8 Git and Other Systems </a></li><li><a href="../en/ch9_0.html">9 Git Internals </a></li></ul></li><li class="dropdown"><a data-toggle="dropdown" href="#" class="dropdown-toggle">简体中文版<b class="caret"></b></a><ul role="menu" class="dropdown-menu"><li><a href="../../index.html">目录</a></li><div class="divider"></div><li><a href="ch1_0.html">1 起步 </a></li><li><a href="ch2_0.html">2 Git 基础 </a></li><li><a href="ch3_0.html">3 Git 分支 </a></li><li><a href="ch4_0.html">4 服务器上的 Git </a></li><li><a href="ch5_0.html">5 分布式 Git </a></li><li><a href="ch6_0.html">6 Git 工具 </a></li><li><a href="ch7_0.html">7 自定义 Git </a></li><li><a href="ch8_0.html">8 Git 与其他系统 </a></li><li><a href="ch9_0.html">9 Git 内部原理 </a></li></ul></li></ul><ul class="nav pull-right"><li><a href="../../about.html">关于</a></li></ul></div></div></div><div id="main" class="container"><div class="wrap clearfix"><div class="span8"><h2>底层命令 (Plumbing) 和高层命令 (Porcelain)</h2>

<p>本书讲解了使用 <code>checkout</code>, <code>branch</code>, <code>remote</code> 等共约 30 个 Git 命令。然而由于 Git 一开始被设计成供 VCS 使用的工具集而不是一整套用户友好的 VCS，它还包含了许多底层命令，这些命令用于以 UNIX 风格使用或由脚本调用。这些命令一般被称为 &quot;plumbing&quot; 命令（底层命令），其他的更友好的命令则被称为 &quot;porcelain&quot; 命令（高层命令）。</p>

<p>本书前八章主要专门讨论高层命令。本章将主要讨论底层命令以理解 Git 的内部工作机制、演示 Git 如何及为何要以这种方式工作。这些命令主要不是用来从命令行手工使用的，更多的是用来为其他工具和自定义脚本服务的。</p>

<p>当你在一个新目录或已有目录内执行 <code>git init</code> 时，Git 会创建一个 <code>.git</code> 目录，几乎所有 Git 存储和操作的内容都位于该目录下。如果你要备份或复制一个库，基本上将这一目录拷贝至其他地方就可以了。本章基本上都讨论该目录下的内容。该目录结构如下：</p>

<pre><code>$ ls
HEAD
branches/
config
description
hooks/
index
info/
objects/
refs/</code></pre>

<p>该目录下有可能还有其他文件，但这是一个全新的 <code>git init</code> 生成的库，所以默认情况下这些就是你能看到的结构。新版本的 Git 不再使用 <code>branches</code> 目录，<code>description</code> 文件仅供 GitWeb 程序使用，所以不用关心这些内容。<code>config</code> 文件包含了项目特有的配置选项，<code>info</code> 目录保存了一份不希望在 .gitignore 文件中管理的忽略模式 (ignored patterns) 的全局可执行文件。<code>hooks</code> 目录保存了第七章详细介绍了的客户端或服务端钩子脚本。</p>

<p>另外还有四个重要的文件或目录：<code>HEAD</code> 及 <code>index</code> 文件，<code>objects</code> 及 <code>refs</code> 目录。这些是 Git 的核心部分。<code>objects</code> 目录存储所有数据内容，<code>refs</code>  目录存储指向数据 (分支) 的提交对象的指针，<code>HEAD</code> 文件指向当前分支，<code>index</code> 文件保存了暂存区域信息。马上你将详细了解 Git 是如何操纵这些内容的。</p>

</div><div class="span3"><ul class="nav nav-tabs nav-stacked sub-nav affix"><li class="nav-header">Git 内部原理</li><li><a href="ch9_1.html">底层命令 (Plumbing) 和高层命令 (Porcelain)</a></li><li><a href="ch9_2.html">Git 对象</a></li><li><a href="ch9_3.html">Git References</a></li><li><a href="ch9_4.html">Packfiles</a></li><li><a href="ch9_5.html">The Refspec</a></li><li><a href="ch9_6.html">传输协议</a></li><li><a href="ch9_7.html">维护及数据恢复</a></li><li><a href="ch9_8.html">总结</a></li></ul></div></div><div class="footer">Build at: 2013-08-22 12:27:20. Source Revision: <a href="https://github.com/progit/progit/tree/336dd5401ee518b5ae426b7ce3b182cf8b6c17eb" target="_blank">336dd54</a>.</div></div><script src="../../assets/vendor/jquery/jquery.min.js"></script><script src="../../assets/vendor/bootstrap/js/bootstrap.min.js"></script><script src="../../assets/js/main.js"></script></body></html>